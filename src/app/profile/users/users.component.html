<div class="row">
    <div class="col-sm-12">
        <app-card cardTitle="Usuarios" cardClass="card-datatable" [options]="false">
            <div class="col-12" *ngIf="this.dataList.length === 0">
                <p>
                    <ngb-alert [dismissible]="false" [type]="'info'">
                      <strong>Atenci√≥n!</strong> No hay datos para mostrar.
                    </ngb-alert>
                  </p>
            </div>
            <div class="table-responsive" *ngIf="dataList.length > 0">
                <table datatable [dtOptions]="dtOptions" class="table table-striped table-bordered nowrap table-hover table-sm">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Usuario</th>
                            <th>Email</th>
                            <th>Rol</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of dataList">
                            <td class="w100">{{item.id}}</td>
                            <td>{{item.username}}</td>
                            <td>{{item.email}}</td>
                            <td>{{item.roles.name}}</td>
                            <td>
                                <span class="badge m-r-5 badge-light-success" *ngIf="item.estado === 1">
                                    <i class="fas fa-check-circle"></i> Activo
                                </span>
                                <span class="badge m-r-5 badge-light-warning" *ngIf="item.estado === 2">
                                    <i class="fas fa-minus-circle"></i> Inactivo
                                </span>
                            </td>
                            <td class="w100">
                                <div class="btn-group mb-2 mr-2 dropdown" ngbDropdown placement="auto">
                                    <button type="button" class="btn btn-outline-primary btn-sm">Acciones</button>
                                    <button type="button" class="btn btn-outline-primary btn-sm dropdown-toggle-split" ngbDropdownToggle><span class="sr-only">Toggle Dropdown</span></button>
                                    <div ngbDropdownMenu>
                                        <a class="dropdown-item" href="javascript:" (click)="addForm(item.id)">
                                          <i class="fas fa-edit"></i> Editar
                                        </a>
                                        <a class="dropdown-item" href="javascript:" (click)="addFormPassword(item.id)">
                                            <i class="fas fa-unlock-alt"></i> Cambiar password
                                        </a>
                                        <a class="dropdown-item" href="javascript:" [routerLink]="['/permissions/']" [queryParams]="{user: item.id}">
                                            <i class="fas fa-user-lock"></i> Cambiar permisos
                                        </a>
                                        <a class="dropdown-item" href="javascript:" *ngIf="item.estado === 2"
                                        (click)="onChangeState(item)">
                                            <i class="fas fa-check-circle"></i> Activar
                                        </a>
                                        <a class="dropdown-item" href="javascript:" *ngIf="item.estado === 1"
                                        (click)="onChangeState(item)">
                                            <i class="fas fa-minus-circle"></i> Desactivar
                                        </a>
                                        <a class="dropdown-item" href="javascript:" (click)="delete(item)">
                                            <i class="fas fa-ban"></i> Eliminar
                                        </a>
                                    </div>
                                  </div>
                            </td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <th>#</th>
                            <th>Usuario</th>
                            <th>Email</th>
                            <th>Rol</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </app-card>
    </div>
</div>

<div class="fixed-button active">
    <button [disabled] = "can_insert" class="btn btn-icon btn-primary has-ripple btn-circle btn-md" (click)="addForm(0)">
      <i aria-hidden="true" class="fas fa-plus-circle fa-2x"></i> [F2]
    </button>
</div>
